<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ZANTARA Message Formatter Test</title>
  <link rel="stylesheet" href="styles/design-tokens.css">
  <link rel="stylesheet" href="styles/chat.css">
  <link rel="stylesheet" href="styles/message-formatter.css">
  <script src="js/message-formatter.js"></script>
  <style>
    body {
      background: #1e1e1e;
      color: #fff;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      padding: 40px;
      max-width: 900px;
      margin: 0 auto;
    }
    
    body.day-mode {
      background: #ffffff;
      color: #000;
    }
    
    h1 {
      text-align: center;
      margin-bottom: 30px;
    }
    
    .test-section {
      margin: 30px 0;
      padding: 20px;
      background: rgba(42, 42, 42, 0.5);
      border-radius: 12px;
      border: 1px solid rgba(255, 255, 255, 0.1);
    }
    
    body.day-mode .test-section {
      background: rgba(255, 255, 255, 0.5);
      border-color: rgba(0, 0, 0, 0.1);
    }
    
    .test-title {
      font-size: 18px;
      font-weight: 600;
      margin-bottom: 15px;
      color: rgba(139, 92, 246, 0.9);
    }
    
    .message {
      margin: 20px 0;
    }
    
    .message.assistant {
      display: flex;
      gap: 12px;
      align-items: flex-start;
    }
    
    .message-avatar {
      width: 36px;
      height: 36px;
      border-radius: 50%;
      background: linear-gradient(135deg, rgba(139, 92, 246, 0.9) 0%, rgba(99, 102, 241, 0.9) 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      color: white;
      flex-shrink: 0;
    }
    
    .message-bubble {
      flex: 1;
      max-width: 100%;
    }
    
    .controls {
      text-align: center;
      margin: 30px 0;
    }
    
    button {
      padding: 12px 24px;
      margin: 0 10px;
      border: none;
      border-radius: 8px;
      background: rgba(139, 92, 246, 0.2);
      color: rgba(139, 92, 246, 0.9);
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
      border: 1px solid rgba(139, 92, 246, 0.3);
    }
    
    button:hover {
      background: rgba(139, 92, 246, 0.3);
      transform: translateY(-2px);
    }
    
    body.day-mode button {
      background: rgba(99, 102, 241, 0.1);
      color: rgba(99, 102, 241, 0.9);
      border-color: rgba(99, 102, 241, 0.3);
    }
  </style>
</head>
<body>
  <h1>ðŸ§ª ZANTARA Message Formatter Test</h1>
  
  <div class="controls">
    <button onclick="toggleTheme()">ðŸŒ™ Toggle Theme</button>
    <button onclick="location.reload()">ðŸ”„ Reload</button>
  </div>
  
  <!-- Test 1: Structured Response -->
  <div class="test-section">
    <div class="test-title">Test 1: Structured Response (Paragraph Format)</div>
    <div class="message assistant">
      <div class="message-avatar">Z</div>
      <div class="message-bubble" id="test1"></div>
    </div>
  </div>
  
  <!-- Test 2: Regular Response with CTA -->
  <div class="test-section">
    <div class="test-title">Test 2: Regular Response with CTA</div>
    <div class="message assistant">
      <div class="message-avatar">Z</div>
      <div class="message-bubble" id="test2"></div>
    </div>
  </div>
  
  <!-- Test 3: Italian Language -->
  <div class="test-section">
    <div class="test-title">Test 3: Italian Language Response</div>
    <div class="message assistant">
      <div class="message-avatar">Z</div>
      <div class="message-bubble" id="test3"></div>
    </div>
  </div>
  
  <!-- Test 4: Complex Structured with Lists -->
  <div class="test-section">
    <div class="test-title">Test 4: Complex Structured Response</div>
    <div class="message assistant">
      <div class="message-avatar">Z</div>
      <div class="message-bubble" id="test4"></div>
    </div>
  </div>

  <script>
    // Theme toggle
    function toggleTheme() {
      document.body.classList.toggle('day-mode');
    }
    
    // Test 1: Structured response like user's example
    const test1Text = `(Paragraph 1 - Summary) In Indonesia, marriage registration requires: 1) A valid marriage license (from home country OR Indonesian civil registry), 2) Proof of identity (passport + certified copy), 3) Proof of residence (utility bills + tenement agreement), and 4) Sworn statement (notarized, with translation if needed). The marriage license must be legalized by the Indonesian embassy (if married abroad) or issued by an Indonesian civil registry office.

(Paragraph 2 - Special Cases) For foreign couples: Option A: Get married at an Indonesian civil registry office (simpler, faster, cheaper - USD 100-300 total) Option B: Get married via notarial deed (notary + lawyer - USD 1,500-3,000 total) Option C: Get married abroad (requires legalization of marriage license abroad - USD 600-1,200 total, plus embassy fees).

(Part 3 - Practical Steps) First, gather all required documents from your home country. Second, have them translated by a sworn translator in Indonesia. Third, visit the immigration office in your area to submit the application. The processing time is typically 14-30 working days.`;
    
    document.getElementById('test1').innerHTML = MessageFormatter.formatStructuredMessage(test1Text, {
      showCTA: true,
      language: 'en'
    });
    
    // Test 2: Regular response
    const test2Text = `Per richiedere un KITAS in Indonesia, devi prima ottenere un visto di lavoro (Index 312) dal tuo paese d'origine. Una volta arrivato in Indonesia, il tuo sponsor locale (datore di lavoro o azienda) presenterÃ  la domanda di KITAS presso l'ufficio immigrazione.

Il processo richiede generalmente 2-4 settimane e include la registrazione delle impronte digitali e della foto. Il costo varia da 1.500 a 3.000 USD a seconda del tipo di KITAS e della durata richiesta.`;
    
    document.getElementById('test2').innerHTML = MessageFormatter.formatStructuredMessage(test2Text, {
      showCTA: true,
      language: 'it'
    });
    
    // Test 3: Italian complex
    const test3Text = `(Paragrafo 1 - Sommario) La costituzione di una PT PMA (Penanaman Modal Asing) in Indonesia richiede un capitale minimo di 10 miliardi di rupie (circa 650.000 USD) per la maggior parte dei settori. Il processo include la registrazione presso l'OSS (Online Single Submission) e l'ottenimento delle licenze necessarie.

(Paragrafo 2 - Requisiti) **Documenti necessari**: passaporto del direttore, piano aziendale, prova del capitale, indirizzo dell'ufficio in Indonesia. **Tempistiche**: 30-60 giorni lavorativi. **Costi**: variabili da 3.000 a 8.000 USD a seconda della complessitÃ .`;
    
    document.getElementById('test3').innerHTML = MessageFormatter.formatStructuredMessage(test3Text, {
      showCTA: true,
      language: 'it'
    });
    
    // Test 4: With lists
    const test4Text = `(Section 1 - Overview) The KITAS renewal process has been updated in 2025. Here are the key changes you need to know about:

**New Requirements:**
- Digital submission through the new portal
- Biometric data update (fingerprints + photo)
- Health certificate from accredited hospital
- Proof of tax compliance (SPT submission)

(Section 2 - Timeline) The renewal must be submitted **60 days before expiration**. Processing time is now faster: typically 7-14 working days instead of the previous 30 days.

(Part 3 - Costs) Standard KITAS renewal: USD 800-1,200. Express service (5 days): USD 1,500-2,000. Family dependent KITAS: USD 600-900 per person.`;
    
    document.getElementById('test4').innerHTML = MessageFormatter.formatStructuredMessage(test4Text, {
      showCTA: true,
      language: 'en'
    });
  </script>
</body>
</html>

