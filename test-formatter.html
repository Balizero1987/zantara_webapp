<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MessageFormatter Test</title>
    <script src="js/message-formatter.js"></script>
    <style>
        body {
            background: #000;
            color: #fff;
            font-family: 'Inter', sans-serif;
            padding: 2rem;
        }
        .test-section {
            margin-bottom: 3rem;
            border: 1px solid #333;
            padding: 1.5rem;
            border-radius: 8px;
        }
        .test-title {
            color: #ff0000;
            font-weight: 600;
            margin-bottom: 1rem;
        }
        .raw-text {
            background: #111;
            padding: 1rem;
            border-radius: 4px;
            margin-bottom: 1rem;
            white-space: pre-wrap;
            font-family: monospace;
            font-size: 0.9rem;
        }
        .formatted-output {
            background: #090920;
            padding: 1rem;
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 8px;
        }
    </style>
</head>
<body>
    <h1 style="color: #ff0000; margin-bottom: 2rem;">MessageFormatter Debug Test</h1>

    <div class="test-section">
        <div class="test-title">Test 1: Simple Paragraphs with Double Newlines</div>
        <div class="raw-text" id="raw1"></div>
        <div class="formatted-output" id="output1"></div>
    </div>

    <div class="test-section">
        <div class="test-title">Test 2: Marco's KITAS Story (From Backend)</div>
        <div class="raw-text" id="raw2"></div>
        <div class="formatted-output" id="output2"></div>
    </div>

    <div class="test-section">
        <div class="test-title">Test 3: Markdown Headers</div>
        <div class="raw-text" id="raw3"></div>
        <div class="formatted-output" id="output3"></div>
    </div>

    <script>
        // Test 1: Simple paragraphs
        const test1 = "Questo è il primo paragrafo.\n\nQuesto è il secondo paragrafo con più testo per vedere come viene formattato.\n\nQuesto è il terzo paragrafo finale.";
        document.getElementById('raw1').textContent = test1;
        document.getElementById('output1').innerHTML = MessageFormatter.format(test1);

        // Test 2: Marco's story (from SSE backend example)
        const test2 = "Marco e il Suo KITAS\n\nMarco era un designer italiano che sognava di vivere a Bali. Dopo mesi di ricerca, ha scoperto Bali Zero e il nostro team lo ha guidato attraverso tutto il processo del KITAS.\n\nOggi Marco lavora serenamente da Canggu, con tutti i documenti in regola. La sua storia dimostra che con la giusta assistenza, trasferirsi a Bali può essere semplice e sicuro.";
        document.getElementById('raw2').textContent = test2;
        document.getElementById('output2').innerHTML = MessageFormatter.format(test2);

        // Test 3: Markdown headers
        const test3 = "# Titolo Principale\n\nQuesto è un paragrafo sotto il titolo principale.\n\n## Sottotitolo\n\nQuesto è un paragrafo sotto il sottotitolo.\n\n### Sotto-sottotitolo\n\nUltimo paragrafo di test.";
        document.getElementById('raw3').textContent = test3;
        document.getElementById('output3').innerHTML = MessageFormatter.format(test3);

        console.log('Test 1 formatted:', MessageFormatter.format(test1));
        console.log('Test 2 formatted:', MessageFormatter.format(test2));
        console.log('Test 3 formatted:', MessageFormatter.format(test3));
    </script>
</body>
</html>
