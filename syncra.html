<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
  <title>ZANTARA ‚Äì AI Voice Assistant (Syncra UI)</title>
  <link rel="icon" type="image/svg+xml" href="assets/favicon.svg">
  <link rel="icon" type="image/png" sizes="32x32" href="assets/favicon-32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="assets/favicon-16.png">
  <link rel="apple-touch-icon" href="assets/apple-touch-icon.png">
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#8B5CF6">
  <!-- Removed forced chat display - now respects login flow -->
  <link rel="stylesheet" href="styles/design-system.css">
  <link rel="stylesheet" href="styles/theme-indonesia.css">
  <link rel="stylesheet" href="styles/design-enhancements.css">
  <link rel="stylesheet" href="styles/logo-animations.css">
  <link rel="stylesheet" href="styles/premium-ui.css">
  <link rel="stylesheet" href="styles/streaming-toggle.css">
  <link rel="stylesheet" href="styles/virtualization-config.css">
  <link rel="stylesheet" href="styles/test-console.css">
  <link rel="stylesheet" href="styles/zantara-theme.css">
  <link rel="stylesheet" href="styles/zantara-theme-day.css?v=prod13">
  <link rel="stylesheet" href="styles/zantara-theme-night-enhanced.css?v=prod13">
  <link rel="stylesheet" href="styles/components.css?v=prod13">
</head>
<body>
  <!-- Splash Screen -->
  <div id="splash-screen" class="splash-screen" role="status" aria-live="polite" style="display:none">
    <img src="assets/lotus-day.svg" class="lotus-splash" alt="ZANTARA">
    <h1 class="splash-title">ZANTARA</h1>
    <div class="splash-loader" aria-hidden="true"></div>
  </div>

  <!-- Red Particles Background -->
  <div class="red-particles" style="pointer-events:none;z-index:-1;">
    <span class="red-particle"></span>
    <span class="red-particle"></span>
    <span class="red-particle"></span>
    <span class="red-particle"></span>
    <span class="red-particle"></span>
    <span class="red-particle"></span>
    <span class="red-particle"></span>
    <span class="red-particle"></span>
    <span class="red-particle"></span>
    <span class="red-particle"></span>
  </div>

  <!-- Background Wave -->
  <div class="bg-wave" style="pointer-events:none;z-index:-1;"></div>

  <!-- Logo Breakout Animation -->
  <div class="logo-breakout" style="pointer-events:none;z-index:-1;">
    <img src="assets/logo-day.jpeg" alt="ZANTARA Logo" class="logo-glitch">
  </div>

  <!-- Parallax Logo -->
  <div class="parallax-logo" style="pointer-events:none;z-index:-1;">
    <img src="assets/logo-day.jpeg" alt="ZANTARA" class="logo-magnetic">
  </div>

  <!-- Main App Container -->
  <div id="app" class="app-container" aria-label="ZANTARA App">
    <header class="app-header glass-card">
      <div class="header-content">
        <img src="assets/logo-day.jpeg" class="logo-3d" alt="ZANTARA" style="width: 45px; height: 45px; border-radius: 50%;">
        <span class="app-title">ZANTARA</span>
        <span id="conn-badge" class="conn-badge" title="Connection mode">Connected</span>
        <button class="menu-toggle" aria-label="Open menu">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M3 12h18M3 6h18M3 18h18" stroke="currentColor" stroke-width="2"/></svg>
        </button>
      </div>
    </header>

    <main class="main-content">
      <!-- Welcome Screen -->
      <div id="welcome-screen" class="welcome-screen" style="display:none">
        <div class="welcome-card glass-card">
          <h2>Hi there,</h2>
          <p>Give any command naturally, from generating content to managing your tasks</p>
          <div class="quick-actions" role="list">
            <button class="action-card glass-card" data-action="generate" role="listitem"><div class="action-icon">üìù</div><span>Generating Content</span></button>
            <button class="action-card glass-card" data-action="document" role="listitem"><div class="action-icon">üìÑ</div><span>Creating Document</span></button>
            <button class="action-card glass-card" data-action="schedule" role="listitem"><div class="action-icon">üìÖ</div><span>Scheduling Meeting</span></button>
            <button class="action-card glass-card" data-action="note" role="listitem"><div class="action-icon">üìù</div><span>Writing Note</span></button>
          </div>
          <button id="voice-button" class="voice-button">
            <div class="voice-button-inner">
              <svg class="microphone-icon" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
                <path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"/>
                <path d="M19 10v2a7 7 0 0 1-14 0v-2"/>
                <path d="M12 19v4m-4 0h8"/>
              </svg>
            </div>
            <span class="voice-label">Tap here to start with ZANTARA</span>
          </button>
        </div>
      </div>

      <!-- Chat Interface -->
      <div id="chat-interface" class="chat-interface" aria-live="polite" aria-label="Chat interface" style="display:flex">
        <div class="messages-container"></div>
        <div class="input-area glass-card">
          <button class="attach-button" aria-label="Attach file">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M21.44 11.05l-9.19 9.19a6 6 0 0 1-8.49-8.49l9.19-9.19a4 4 0 0 1 5.66 5.66l-9.2 9.19a2 2 0 0 1-2.83-2.83l8.49-8.48" stroke="currentColor" stroke-width="2"/></svg>
          </button>
          <input type="text" id="message-input" class="message-input" placeholder="Type a message or use voice..." aria-label="Message input" onkeydown="if(event.key==='Enter' && !event.shiftKey){ event.preventDefault(); window.zantaraApp && window.zantaraApp.sendMessage && window.zantaraApp.sendMessage(); }">
          <button id="voice-input" class="voice-input-button" aria-label="Start voice input">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"/><path d="M19 10v2a7 7 0 0 1-14 0v-2"/></svg>
          </button>
          <button id="send-button" class="send-button" aria-label="Send message" onclick="window.zantaraApp && window.zantaraApp.sendMessage && window.zantaraApp.sendMessage()">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M22 2L11 13M22 2l-7 20-4-9-9-4 20-7z" stroke="currentColor" stroke-width="2"/></svg>
          </button>
        </div>
      </div>

      <!-- Voice Recording Overlay -->
      <div id="voice-overlay" class="voice-overlay" aria-hidden="true">
        <div class="voice-recording-card glass-card">
          <div class="voice-visualizer"><canvas id="voice-canvas"></canvas></div>
          <p class="listening-text">Listening...</p>
          <button class="stop-recording" aria-label="Stop recording"><svg width="40" height="40" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><rect x="6" y="6" width="12" height="12" rx="2"/></svg></button>
        </div>
      </div>
    </main>

    <nav class="bottom-nav glass-card" aria-label="Primary">
      <button class="nav-item active" data-view="chat"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z" stroke="currentColor" stroke-width="2"/></svg><span>Chat</span></button>
      <button class="nav-item" data-view="tools"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M3 3h6l6 6h6v6l-6 6H9l-6-6z" stroke="currentColor" stroke-width="2"/></svg><span>Tools</span></button>
      <button class="nav-item" data-view="files"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z" stroke="currentColor" stroke-width="2"/></svg><span>Files</span></button>
      <button class="nav-item" data-view="settings"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" aria-hidden="true"><circle cx="12" cy="12" r="3" stroke="currentColor" stroke-width="2"/><path d="M12 1v6m0 6v6m4.22-13.22l-4.24 4.24m0 3.96l4.24 4.24M20 12h-6m-6 0H2" stroke="currentColor" stroke-width="2"/></svg><span>Settings</span></button>
    </nav>
  </div>

  <script src="js/api-config.js?v=prod13"></script>
  <script src="js/app.js?v=prod13" type="module"></script>
  <script src="js/streaming-toggle.js"></script>
  <!-- Streaming modules: load only if explicitly enabled to avoid 404s -->
  <script>
    (function(){
      var enabled = location.search.indexOf('streaming=true') !== -1 || localStorage.getItem('zantara-streaming') === 'true';
      if (!enabled) return;
      ['js/streaming-client.js','js/streaming-ui.js','js/streaming-toggle-ui.js'].forEach(function(src){ var s=document.createElement('script'); s.src=src; document.head.appendChild(s); });
      console.log('[Syncra] Streaming modules requested');
    })();
  </script>
  <script src="js/message-virtualization.js"></script>
  <script src="js/test-console.js?v=prod13"></script>
  <script src="js/theme-switcher.js?v=prod13"></script>
  <script src="js/logo-interactions.js"></script>
  <script>
    // Update connection badge (Proxy/Direct + host)
    (function(){
      try {
        const el = document.getElementById('conn-badge');
        if (!el || !window.ZANTARA_API) return;
        const cfg = window.ZANTARA_API.config || {};
        const proxy = (cfg.proxy && cfg.proxy.production && cfg.proxy.production.base) || '';
        const direct = (cfg.production && cfg.production.base) || '';
        if (proxy) {
          try { const u = new URL(proxy); el.textContent = 'Connected: Proxy'; el.title = 'Proxy ' + u.host; } catch(_) { el.textContent = 'Connected: Proxy'; }
        } else if (direct) {
          try { const u = new URL(direct); el.textContent = 'Connected: Direct'; el.title = 'Direct ' + u.host; } catch(_) { el.textContent = 'Connected: Direct'; }
        } else {
          el.textContent = 'Connected';
        }
      } catch (_) {}
    })();
  </script>
</body>
</html>
