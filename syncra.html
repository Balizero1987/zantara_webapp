<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
  <title>ZANTARA â€“ Chat</title>
  <link rel="icon" type="image/svg+xml" href="assets/favicon.svg">
  <link rel="icon" type="image/png" sizes="32x32" href="assets/favicon-32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="assets/favicon-16.png">
  <link rel="apple-touch-icon" href="assets/apple-touch-icon.png">
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#8B5CF6">
  <style>
    /* Safe build: force chat visible; remove any blockers */
    #splash-screen{display:none!important}
    #welcome-screen{display:none!important}
    #chat-interface{display:flex!important}
    /* Ensure nothing covers input */
    .red-particles,.bg-wave,.logo-breakout,.parallax-logo{pointer-events:none!important;z-index:-1!important}
  </style>
  <link rel="stylesheet" href="styles/design-system.css">
  <link rel="stylesheet" href="styles/zantara-theme-day.css?v=prod15">
  <link rel="stylesheet" href="styles/zantara-theme-night-enhanced.css?v=prod15">
  <link rel="stylesheet" href="styles/components.css?v=prod15">
</head>
<body>
  <div id="app" class="app-container" aria-label="ZANTARA App">
    <header class="app-header glass-card">
      <div class="header-content">
        <img src="assets/lotus-day.svg" class="lotus-logo logo-polish" alt="ZANTARA" style="width:40px;height:40px;">
        <span class="app-title">ZANTARA</span>
        <span id="conn-badge" class="conn-badge" title="Connection mode">Connected</span>
      </div>
    </header>

    <main class="main-content">
      <div id="chat-interface" class="chat-interface" aria-live="polite" aria-label="Chat interface" style="display:flex">
        <div class="messages-container"></div>
        <form id="chat-form" class="input-area glass-card" onsubmit="try{ if(window.zantaraApp&&window.zantaraApp.sendMessage){ window.zantaraApp.sendMessage(); } }catch(e){} return false;">
          <button class="attach-button" aria-label="Attach file" type="button">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M21.44 11.05l-9.19 9.19a6 6 0 0 1-8.49-8.49l9.19-9.19a4 4 0 0 1 5.66 5.66l-9.2 9.19a2 2 0 0 1-2.83-2.83l8.49-8.48" stroke="currentColor" stroke-width="2"/></svg>
          </button>
          <input type="text" id="message-input" name="message" class="message-input" placeholder="Type a message or use voice..." aria-label="Message input" enterkeyhint="send" inputmode="text" autocomplete="off">
          <button id="voice-input" class="voice-input-button" aria-label="Start voice input" type="button">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"/><path d="M19 10v2a7 7 0 0 1-14 0v-2"/></svg>
          </button>
          <button id="send-button" class="send-button" aria-label="Send message" type="submit">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M22 2L11 13M22 2l-7 20-4-9-9-4 20-7z" stroke="currentColor" stroke-width="2"/></svg>
          </button>
        </form>
      </div>
    </main>

    <nav class="bottom-nav glass-card" aria-label="Primary">
      <button class="nav-item active" data-view="chat"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z" stroke="currentColor" stroke-width="2"/></svg><span>Chat</span></button>
      <button class="nav-item" data-view="tools"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M3 3h6l6 6h6v6l-6 6H9l-6-6z" stroke="currentColor" stroke-width="2"/></svg><span>Tools</span></button>
      <button class="nav-item" data-view="files"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z" stroke="currentColor" stroke-width="2"/></svg><span>Files</span></button>
      <button class="nav-item" data-view="settings"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" aria-hidden="true"><circle cx="12" cy="12" r="3" stroke="currentColor" stroke-width="2"/><path d="M12 1v6m0 6v6m4.22-13.22l-4.24 4.24m0 3.96l4.24 4.24M20 12h-6m-6 0H2" stroke="currentColor" stroke-width="2"/></svg><span>Settings</span></button>
    </nav>
  </div>

  <script src="js/api-config.js?v=prod15"></script>
  <script src="js/app.js?v=prod15"></script>
  <script src="js/theme-switcher.js?v=prod15"></script>
  <script>
    // Safety: ensure handlers exist
    window.addEventListener('load', function(){
      try {
        var sb=document.getElementById('send-button'); if(sb) sb.onclick=function(){ if(window.zantaraApp&&window.zantaraApp.sendMessage){ window.zantaraApp.sendMessage(); }};
        var fm=document.getElementById('chat-form'); if(fm){ fm.onsubmit=function(){ try{ if(window.zantaraApp&&window.zantaraApp.sendMessage){ window.zantaraApp.sendMessage(); } }catch(e){} return false; }; }
      } catch(e){}
      // Connection badge
      try{
        var el=document.getElementById('conn-badge');
        if(el&&window.ZANTARA_API){ var cfg=window.ZANTARA_API.config||{}; var p=(cfg.proxy&&cfg.proxy.production&&cfg.proxy.production.base)||''; var d=(cfg.production&&cfg.production.base)||''; el.textContent=p?'Connected: Proxy':(d?'Connected: Direct':'Connected'); }
      }catch(e){}
    });
  </script>
</body>
</html>
